import{u as y}from"./vue-router-NsaB4nCB.js";import{s as h}from"./pinia-CsvwGg5R.js";import{u as C}from"./index-Zx8En3lY.js";import{U as v,_ as G}from"./TopBar.vue_vue_type_script_setup_true_lang-BLZh1CK8.js";import{d as j,r as b,$ as E,o as U,f as i,O as x,i as o,E as p,Y as m,N as u,P as V,G as S,e as r}from"./@vue-Dgw5popM.js";import"./leaflet-CA-SS5n8.js";/* empty css                   */import"./@primevue-DsDnal0c.js";import"./@primeuix-CZYCaOtW.js";import"./@fortawesome-DPfb-5vm.js";import"./@vue-leaflet-DmIZX8Tx.js";import"./primevue-CEBTUVJt.js";import"./sweetalert2-BkU8I-GU.js";const z="/oakhw/hero.png",P={class:"pt-24 mx-auto w-11/12"},A={class:"grid grid-cols-1 sm:grid-cols-2 gap-8"},R={class:"w-full bg-zinc-50 border-2 border-zinc-100 px-8 py-8 rounded-2xl"},T={class:"mb-4"},I={class:"text-xl font-semibold mb-1"},L={key:0,class:"text-green-600"},D={class:"mb-4"},H={class:"text-xl font-semibold mb-1"},J={key:0,class:"text-green-600"},M={key:0,class:"flex justify-center w-full"},ne=j({__name:"LoginView",setup(O){const k=y(),d=C(),{User:t}=h(d),f=b(null),g=b(!1),B=s=>{const e=F(s.credential);t.value.GoogleName=e.name,t.value.GoogleEmail=e.email,t.value.GooglePicture=e.picture},F=s=>{const l=s.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),a=decodeURIComponent(atob(l).split("").map(n=>"%"+("00"+n.charCodeAt(0).toString(16)).slice(-2)).join(""));return JSON.parse(a)},_=()=>{google.accounts.id.initialize({client_id:d.GoogleClientID,callback:B}),google.accounts.id.renderButton(f.value,{theme:"outline",size:"large"})},w=()=>{FB.login(s=>{s.authResponse&&FB.api("/me",{fields:"name,email,picture"},e=>{t.value.FBName=e.name,t.value.FBEmail=e.email,t.value.FBPicture=e.picture.data.url})},{scope:"public_profile,email"})},N=()=>{if(!t.value.GoogleName)return v.Alert("請先登入Google帳號","error");if(!t.value.FBName)return v.Alert("請先綁定Facebook帳號","error");k.push("/")};return E(()=>{g.value=!!(t.value.GoogleName&&t.value.FBName)}),U(()=>{const s=document.createElement("script");s.src="https://accounts.google.com/gsi/client",s.async=!0,s.defer=!0,s.onload=_,document.head.appendChild(s),window.fbAsyncInit=function(){FB.init({appId:d.FaceBookAppID,cookie:!0,xfbml:!0,version:"v12.0"})},function(e,l,a){let n,c=e.getElementsByTagName(l)[0];e.getElementById(a)||(n=e.createElement(l),n.id=a,n.src="https://connect.facebook.net/en_US/sdk.js",c&&c.parentNode&&c.parentNode.insertBefore(n,c))}(document,"script","facebook-jssdk")}),(s,e)=>{const l=S("PrimeButton");return r(),i(V,null,[x(G),o("div",P,[e[8]||(e[8]=o("div",{class:"w-full flex flex-col items-center justify-center mb-8"},[o("div",{class:"text-4xl font-semibold"},"歡迎使用"),o("div",{class:"text-4xl font-semibold"},"新北市都市更新Demo")],-1)),o("div",A,[e[7]||(e[7]=o("div",{class:"w-full"},[o("img",{class:"",src:z,alt:"Your Company"})],-1)),o("div",R,[e[5]||(e[5]=o("div",{class:"text-2xl font-semibold mb-2"},"使用說明",-1)),o("div",T,[o("div",I,[e[1]||(e[1]=p(" 1. 登入Google ")),m(t).GoogleName?(r(),i("span",L,e[0]||(e[0]=[o("i",{class:"pi pi-check-circle"},null,-1)]))):u("",!0)]),m(t).GoogleName?u("",!0):(r(),i("div",{key:0,ref_key:"GoogleButton",ref:f},null,512))]),o("div",D,[o("div",H,[e[3]||(e[3]=p(" 2. 綁定Facebook ")),m(t).FBName?(r(),i("span",J,e[2]||(e[2]=[o("i",{class:"pi pi-check-circle"},null,-1)]))):u("",!0)]),m(t).FBName?u("",!0):(r(),i("div",M,[o("button",{onClick:w,class:"w-full bg-blue-600 font-semibold text-white py-2 rounded-lg hover:bg-blue-700 transition duration-300 flex items-center justify-center"},e[4]||(e[4]=[o("svg",{class:"w-6 h-6 mr-2",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[o("path",{fill:"#FFFFFF",d:"M22.675 0h-21.35C.6 0 0 .6 0 1.325v21.351C0 23.4.6 24 1.325 24H12.82v-9.294H9.692v-3.622h3.128V8.413c0-3.1 1.893-4.788 4.659-4.788 1.325 0 2.463.099 2.794.143v3.24l-1.918.001c-1.504 0-1.794.715-1.794 1.763v2.31h3.587l-.467 3.622h-3.12V24h6.116C23.4 24 24 23.4 24 22.675V1.325C24 .6 23.4 0 22.675 0z"})],-1),p(" 綁定Facebook ")]))]))]),e[6]||(e[6]=o("div",{class:"text-xl font-semibold mb-1"},"3. 開始使用",-1)),x(l,{class:"w-full",label:"開始使用",severity:"contrast",outlined:!g.value,onClick:N},null,8,["outlined"])])])])],64)}}});export{ne as default};
