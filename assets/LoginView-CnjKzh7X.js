import{u as y}from"./vue-router-NsaB4nCB.js";import{s as C}from"./pinia-CsvwGg5R.js";import{u as G}from"./index-QVGx9HOs.js";import{_ as E,U as j}from"./TopBar.vue_vue_type_script_setup_true_lang-DJxl5i59.js";import{d as U,r as b,$ as V,o as S,f as r,O as x,i as o,E as f,Y as u,N as d,I as z,P,G as D,H as I,e as a}from"./@vue-Dgw5popM.js";import"./leaflet-CA-SS5n8.js";/* empty css                   */import"./@primevue-DsDnal0c.js";import"./@primeuix-CZYCaOtW.js";import"./@fortawesome-DPfb-5vm.js";import"./@vue-leaflet-DmIZX8Tx.js";import"./primevue-CEBTUVJt.js";import"./sweetalert2-BkU8I-GU.js";const R="/oakhw/hero.png",T={class:"pt-24 mx-auto w-11/12"},A={class:"grid grid-cols-1 sm:grid-cols-2 gap-8"},L={class:"w-full bg-zinc-50 border-2 border-zinc-100 px-8 py-8 rounded-2xl"},H={class:"mb-4"},J={class:"text-xl font-semibold mb-1"},M={key:0,class:"text-green-600"},O={class:"mb-4"},Y={class:"text-xl font-semibold mb-1"},$={class:"pi pi-question-circle !text-xl mr-1"},q={key:0,class:"text-green-600"},K={key:0,class:"flex justify-center w-full"},me=U({__name:"LoginView",setup(Q){const{Alert:c,Confirm:B}=j,F=y(),p=G(),{User:t}=C(p),g=b(null),v=b(!1),_=s=>{const e=k(s.credential);t.value.GoogleName=e.name,t.value.GoogleEmail=e.email,t.value.GooglePicture=e.picture},k=s=>{const l=s.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),i=decodeURIComponent(atob(l).split("").map(n=>"%"+("00"+n.charCodeAt(0).toString(16)).slice(-2)).join(""));return JSON.parse(i)},N=()=>{google.accounts.id.initialize({client_id:p.GoogleClientID,callback:_}),google.accounts.id.renderButton(g.value,{theme:"outline",size:"large"})},w=()=>{FB.login(s=>{s.authResponse?FB.api("/me",{fields:"name,email,picture"},e=>{t.value.FBName=e.name,t.value.FBEmail=e.email,t.value.FBPicture=e.picture.data.url}):B("FB無法登入，是否跳過FB登入？").then(e=>{if(e.isConfirmed){if(!t.value.GoogleName){c("請先登入Google","error");return}t.value.FBName=t.value.GoogleName,t.value.FBEmail=t.value.GoogleEmail,c("已經跳過FB登入","info")}})},{scope:"public_profile,email"})},h=()=>{if(!t.value.GoogleName)return c("請先登入Google帳號","error");if(!t.value.FBName)return c("請先綁定Facebook帳號","error");F.push("/")};return V(()=>{v.value=!!(t.value.GoogleName&&t.value.FBName)}),S(()=>{const s=document.createElement("script");s.src="https://accounts.google.com/gsi/client",s.async=!0,s.defer=!0,s.onload=N,document.head.appendChild(s),window.fbAsyncInit=function(){FB.init({appId:p.FaceBookAppID,cookie:!0,xfbml:!0,version:"v12.0"})},function(e,l,i){let n,m=e.getElementsByTagName(l)[0];e.getElementById(i)||(n=e.createElement(l),n.id=i,n.src="https://connect.facebook.net/en_US/sdk.js",m&&m.parentNode&&m.parentNode.insertBefore(n,m))}(document,"script","facebook-jssdk")}),(s,e)=>{const l=D("PrimeButton"),i=I("tooltip");return a(),r(P,null,[x(E),o("div",T,[e[8]||(e[8]=o("div",{class:"w-full flex flex-col items-center justify-center mb-8"},[o("div",{class:"text-4xl font-semibold"},"歡迎使用"),o("div",{class:"text-4xl font-semibold"},"新北市都市更新Demo")],-1)),o("div",A,[e[7]||(e[7]=o("div",{class:"w-full"},[o("img",{class:"",src:R,alt:"Your Company"})],-1)),o("div",L,[e[5]||(e[5]=o("div",{class:"text-2xl font-semibold mb-2"},"使用說明",-1)),o("div",H,[o("div",J,[e[1]||(e[1]=f(" 1. 登入Google ")),u(t).GoogleName?(a(),r("span",M,e[0]||(e[0]=[o("i",{class:"pi pi-check-circle"},null,-1)]))):d("",!0)]),u(t).GoogleName?d("",!0):(a(),r("div",{key:0,ref_key:"GoogleButton",ref:g},null,512))]),o("div",O,[o("div",Y,[e[3]||(e[3]=f(" 2. 綁定Facebook ")),z(o("i",$,null,512),[[i,"因FB登入開發者需商業認證，若無法登入請同意略過登入"]]),u(t).FBName?(a(),r("span",q,e[2]||(e[2]=[o("i",{class:"pi pi-check-circle"},null,-1)]))):d("",!0)]),u(t).FBName?d("",!0):(a(),r("div",K,[o("button",{onClick:w,class:"w-full bg-blue-600 font-semibold text-white py-2 rounded-lg hover:bg-blue-700 transition duration-300 flex items-center justify-center"},e[4]||(e[4]=[o("svg",{class:"w-6 h-6 mr-2",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[o("path",{fill:"#FFFFFF",d:"M22.675 0h-21.35C.6 0 0 .6 0 1.325v21.351C0 23.4.6 24 1.325 24H12.82v-9.294H9.692v-3.622h3.128V8.413c0-3.1 1.893-4.788 4.659-4.788 1.325 0 2.463.099 2.794.143v3.24l-1.918.001c-1.504 0-1.794.715-1.794 1.763v2.31h3.587l-.467 3.622h-3.12V24h6.116C23.4 24 24 23.4 24 22.675V1.325C24 .6 23.4 0 22.675 0z"})],-1),f(" 綁定Facebook ")]))]))]),e[6]||(e[6]=o("div",{class:"text-xl font-semibold mb-1"},"3. 開始使用",-1)),x(l,{class:"w-full",label:"開始使用",severity:"contrast",outlined:!v.value,onClick:h},null,8,["outlined"])])])])],64)}}});export{me as default};
