var h=Object.defineProperty;var B=(l,o,n)=>o in l?h(l,o,{enumerable:!0,configurable:!0,writable:!0,value:n}):l[o]=n;var u=(l,o,n)=>B(l,typeof o!="symbol"?o+"":o,n);import{d as v,r as g,o as F,c as k,a as s,b as x,e as w}from"./index-KHdl0Vl4.js";class c{}u(c,"User",{GoogleName:"",GoogleEmail:"",GooglePicture:"",FBName:"",FBEmail:"",FBPicture:""}),u(c,"GoogleClientID","97769993562-s61o6dpbp9r9qqqon1s01ii6ec0jd3h2.apps.googleusercontent.com"),u(c,"FaceBookAppID","2277578655947804");const y={class:"min-h-screen flex items-center justify-center bg-gray-100"},C={class:"bg-white p-8 rounded-lg shadow-md w-full max-w-md"},j=v({__name:"LoginView",setup(l){const o=g(c.User),n=g(null),m=t=>{const e=p(t.credential);o.value.GoogleName=e.name,o.value.GoogleEmail=e.email,o.value.GooglePicture=e.picture,console.log("JWT Token:",t.credential),console.log("Decoded Token:",e)},p=t=>{const i=t.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),r=decodeURIComponent(atob(i).split("").map(a=>"%"+("00"+a.charCodeAt(0).toString(16)).slice(-2)).join(""));return JSON.parse(r)},f=()=>{const t=c.GoogleClientID;google.accounts.id.initialize({client_id:t,callback:m}),google.accounts.id.renderButton(n.value,{theme:"outline",size:"large"})},b=()=>{FB.login(t=>{t.authResponse?FB.api("/me",{fields:"name,email,picture"},e=>{o.value.FBName=e.name,o.value.FBEmail=e.email,o.value.FBPicture=e.picture.data.url,console.log("User Info:",e),console.log(o.value)}):console.log("User cancelled login or did not fully authorize.")},{scope:"public_profile,email"})};return F(()=>{const t=document.createElement("script");t.src="https://accounts.google.com/gsi/client",t.async=!0,t.defer=!0,t.onload=f,document.head.appendChild(t),window.fbAsyncInit=function(){FB.init({appId:c.FaceBookAppID,cookie:!0,xfbml:!0,version:"v12.0"})},function(e,i,r){let a,d=e.getElementsByTagName(i)[0];e.getElementById(r)||(a=e.createElement(i),a.id=r,a.src="https://connect.facebook.net/en_US/sdk.js",d&&d.parentNode&&d.parentNode.insertBefore(a,d))}(document,"script","facebook-jssdk")}),(t,e)=>(w(),k("div",y,[s("div",C,[e[1]||(e[1]=s("h2",{class:"text-2xl font-bold text-center"},"歡迎使用",-1)),e[2]||(e[2]=s("h2",{class:"text-2xl font-bold mb-6 text-center"},"新北市都市更新Demo",-1)),s("div",{ref_key:"GoogleButton",ref:n,class:"flex justify-center mb-4"},null,512),s("button",{onClick:b,class:"w-full bg-blue-600 font-semibold text-white py-2 rounded-lg hover:bg-blue-700 transition duration-300 flex items-center justify-center"},e[0]||(e[0]=[s("svg",{class:"w-6 h-6 mr-2",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[s("path",{fill:"#FFFFFF",d:"M22.675 0h-21.35C.6 0 0 .6 0 1.325v21.351C0 23.4.6 24 1.325 24H12.82v-9.294H9.692v-3.622h3.128V8.413c0-3.1 1.893-4.788 4.659-4.788 1.325 0 2.463.099 2.794.143v3.24l-1.918.001c-1.504 0-1.794.715-1.794 1.763v2.31h3.587l-.467 3.622h-3.12V24h6.116C23.4 24 24 23.4 24 22.675V1.325C24 .6 23.4 0 22.675 0z"})],-1),x(" 綁定Facebook ")]))])]))}});export{j as default};
