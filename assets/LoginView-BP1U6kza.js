import{d as h,u as y,s as N,r as v,w as C,o as G,c as i,a as b,b as o,e as p,f as d,g as u,F as U,h as j,i as a}from"./index-CliSsjwS.js";import{U as x,_ as E}from"./TopBar.vue_vue_type_script_setup_true_lang-BB2QcDiE.js";const V="/oakhw/hero.png",z={class:"pt-24 mx-auto w-10/12"},S={class:"grid grid-cols-1 sm:grid-cols-2 gap-8"},A={class:"w-full bg-zinc-50 border-2 border-zinc-100 px-8 py-8 rounded-2xl"},I={class:"mb-4"},P={class:"text-xl font-semibold mb-1"},T={key:0,class:"text-green-600"},L={class:"mb-4"},R={class:"text-xl font-semibold mb-1"},D={key:0,class:"text-green-600"},H={key:0,class:"flex justify-center w-full"},Y=h({__name:"LoginView",setup(J){const m=y(),{User:t}=N(m),g=v(null),f=v(!1),k=s=>{const e=B(s.credential);t.value.GoogleName=e.name,t.value.GoogleEmail=e.email,t.value.GooglePicture=e.picture},B=s=>{const l=s.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),r=decodeURIComponent(atob(l).split("").map(n=>"%"+("00"+n.charCodeAt(0).toString(16)).slice(-2)).join(""));return JSON.parse(r)},w=()=>{const s=m.GoogleClientID;google.accounts.id.initialize({client_id:s,callback:k}),google.accounts.id.renderButton(g.value,{theme:"outline",size:"large"})},F=()=>{FB.login(s=>{s.authResponse?FB.api("/me",{fields:"name,email,picture"},e=>{t.value.FBName=e.name,t.value.FBEmail=e.email,t.value.FBPicture=e.picture.data.url,console.log("User Info:",e),console.log(t.value)}):console.log("User cancelled login or did not fully authorize.")},{scope:"public_profile,email"})},_=()=>{if(!t.value.GoogleName)return x.Alert("請先登入Google帳號","error");if(!t.value.FBName)return x.Alert("請先綁定Facebook帳號","error");window.router.push("/")};return C(()=>{f.value=!!(t.value.GoogleName&&t.value.FBName)}),G(()=>{const s=document.createElement("script");s.src="https://accounts.google.com/gsi/client",s.async=!0,s.defer=!0,s.onload=w,document.head.appendChild(s),window.fbAsyncInit=function(){FB.init({appId:m.FaceBookAppID,cookie:!0,xfbml:!0,version:"v12.0"})},function(e,l,r){let n,c=e.getElementsByTagName(l)[0];e.getElementById(r)||(n=e.createElement(l),n.id=r,n.src="https://connect.facebook.net/en_US/sdk.js",c&&c.parentNode&&c.parentNode.insertBefore(n,c))}(document,"script","facebook-jssdk")}),(s,e)=>{const l=j("PrimeButton");return a(),i(U,null,[b(E),o("div",z,[e[8]||(e[8]=o("div",{class:"w-full flex flex-col items-center justify-center mb-8"},[o("div",{class:"text-4xl font-semibold"},"歡迎使用"),o("div",{class:"text-4xl font-semibold"},"新北市都市更新Demo")],-1)),o("div",S,[e[7]||(e[7]=o("div",{class:"w-full"},[o("img",{class:"",src:V,alt:"Your Company"})],-1)),o("div",A,[e[5]||(e[5]=o("div",{class:"text-2xl font-semibold mb-2"},"使用說明",-1)),o("div",I,[o("div",P,[e[1]||(e[1]=p(" 1. 登入Google ")),d(t).GoogleName?(a(),i("span",T,e[0]||(e[0]=[o("i",{class:"pi pi-check-circle"},null,-1)]))):u("",!0)]),d(t).GoogleName?u("",!0):(a(),i("div",{key:0,ref_key:"GoogleButton",ref:g,class:""},null,512))]),o("div",L,[o("div",R,[e[3]||(e[3]=p(" 2. 綁定Facebook ")),d(t).FBName?(a(),i("span",D,e[2]||(e[2]=[o("i",{class:"pi pi-check-circle"},null,-1)]))):u("",!0)]),d(t).FBName?u("",!0):(a(),i("div",H,[o("button",{onClick:F,class:"w-full bg-blue-600 font-semibold text-white py-2 rounded-lg hover:bg-blue-700 transition duration-300 flex items-center justify-center"},e[4]||(e[4]=[o("svg",{class:"w-6 h-6 mr-2",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[o("path",{fill:"#FFFFFF",d:"M22.675 0h-21.35C.6 0 0 .6 0 1.325v21.351C0 23.4.6 24 1.325 24H12.82v-9.294H9.692v-3.622h3.128V8.413c0-3.1 1.893-4.788 4.659-4.788 1.325 0 2.463.099 2.794.143v3.24l-1.918.001c-1.504 0-1.794.715-1.794 1.763v2.31h3.587l-.467 3.622h-3.12V24h6.116C23.4 24 24 23.4 24 22.675V1.325C24 .6 23.4 0 22.675 0z"})],-1),p(" 綁定Facebook ")]))]))]),e[6]||(e[6]=o("div",{class:"text-xl font-semibold mb-1"},"3. 開始使用",-1)),b(l,{class:"w-full",label:"開始使用",severity:"contrast",outlined:!f.value,onClick:_},null,8,["outlined"])])])])],64)}}});export{Y as default};
