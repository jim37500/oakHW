import{U as c}from"./UserService-CVuK5wLS.js";import{d as f,r as d,o as b,c as v,a as n,b as h,e as x}from"./index-BEo4Yxr1.js";const B={class:"min-h-screen flex items-center justify-center bg-gray-100"},k={class:"bg-white p-8 rounded-lg shadow-md w-full max-w-md"},C=f({__name:"LoginView",setup(w){const t=d(c.User),r=d(null),u=o=>{const e=m(o.credential);t.value.GoogleName=e.name,t.value.GoogleEmail=e.email,t.value.GooglePicture=e.picture,console.log("JWT Token:",o.credential),console.log("Decoded Token:",e)},m=o=>{const s=o.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),a=decodeURIComponent(atob(s).split("").map(l=>"%"+("00"+l.charCodeAt(0).toString(16)).slice(-2)).join(""));return JSON.parse(a)},g=()=>{const o=c.GoogleClientID;google.accounts.id.initialize({client_id:o,callback:u}),google.accounts.id.renderButton(r.value,{theme:"outline",size:"large"})},p=()=>{FB.login(o=>{o.authResponse?FB.api("/me",{fields:"name,email,picture"},e=>{t.value.FBName=e.name,t.value.FBEmail=e.email,t.value.FBPicture=e.picture.data.url,console.log("User Info:",e),console.log(t.value)}):console.log("User cancelled login or did not fully authorize.")},{scope:"public_profile,email"})};return b(()=>{const o=document.createElement("script");o.src="https://accounts.google.com/gsi/client",o.async=!0,o.defer=!0,o.onload=g,document.head.appendChild(o),window.fbAsyncInit=function(){FB.init({appId:c.FaceBookAppID,cookie:!0,xfbml:!0,version:"v12.0"})},function(e,s,a){let l,i=e.getElementsByTagName(s)[0];e.getElementById(a)||(l=e.createElement(s),l.id=a,l.src="https://connect.facebook.net/en_US/sdk.js",i&&i.parentNode&&i.parentNode.insertBefore(l,i))}(document,"script","facebook-jssdk")}),(o,e)=>(x(),v("div",B,[n("div",k,[e[1]||(e[1]=n("h2",{class:"text-2xl font-bold text-center"},"歡迎使用",-1)),e[2]||(e[2]=n("h2",{class:"text-2xl font-bold mb-6 text-center"},"新北市都市更新Demo",-1)),n("div",{ref_key:"GoogleButton",ref:r,class:"flex justify-center mb-4"},null,512),n("button",{onClick:p,class:"w-full bg-blue-600 font-semibold text-white py-2 rounded-lg hover:bg-blue-700 transition duration-300 flex items-center justify-center"},e[0]||(e[0]=[n("svg",{class:"w-6 h-6 mr-2",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[n("path",{fill:"#FFFFFF",d:"M22.675 0h-21.35C.6 0 0 .6 0 1.325v21.351C0 23.4.6 24 1.325 24H12.82v-9.294H9.692v-3.622h3.128V8.413c0-3.1 1.893-4.788 4.659-4.788 1.325 0 2.463.099 2.794.143v3.24l-1.918.001c-1.504 0-1.794.715-1.794 1.763v2.31h3.587l-.467 3.622h-3.12V24h6.116C23.4 24 24 23.4 24 22.675V1.325C24 .6 23.4 0 22.675 0z"})],-1),h(" 綁定Facebook ")]))])]))}});export{C as default};
